
#include "../../multirotor.h"

namespace rl_tools::rl::environments::multirotor::parameters::dynamics{
    namespace fs{
        template<typename SPEC, typename = utils::typing::enable_if_t<SPEC::N == 4>> // This is a quadrotor
        constexpr typename ParametersBase<SPEC>::Dynamics base = {
            // Rotor positions
//                array([[ 0.20895 , -0.240666,  0.      ],
//                [-0.20895 ,  0.240666,  0.      ],
//                [ 0.20895 ,  0.240666,  0.      ],
//                [-0.20895 , -0.240666,  0.      ]])
            {
                {
                    +0.20895,
                    -0.240666,
                    0
                },
                {
                    -0.20895,
                    +0.240666,
                    0
                },
                {
                    +0.20895,
                    +0.240666,
                    0
                },
                {
                    -0.20895,
                    -0.240666,
                    0
                },
            },
            // Rotor thrust directions
            {
                {0, 0, 1},
                {0, 0, 1},
                {0, 0, 1},
                {0, 0, 1},
            },
            // Rotor torque directions
            {
                {0, 0, -1},
                {0, 0, -1},
                {0, 0, +1},
                {0, 0, +1},
            },
            // thrust constants
            {
                2.55643, // alternative: 0
                0,
                28.06559 // alternative: 40.74310806823814
            },
            // torque constant
            0.01492,
            // mass vehicle
            3.35000,
            // gravity
            {0, 0, -9.81},
            // J
            {
                {
                    0.11361,
                    0.0000000000000000000000000000000000000000,
                    0.0000000000000000000000000000000000000000
                },
                {
                    0.0000000000000000000000000000000000000000,
                    0.12552,
                    0.0000000000000000000000000000000000000000
                },
                {
                    0.0000000000000000000000000000000000000000,
                    0.0000000000000000000000000000000000000000,
                    0.22822
                }
            },
            // J_inv
            {
                {
                    8.802042073761113,
                    0.0000000000000000000000000000000000000000,
                    0.0000000000000000000000000000000000000000
                },
                {
                    0.0000000000000000000000000000000000000000,
                    7.966857871255577,
                    0.0000000000000000000000000000000000000000
                },
                {
                    0.0000000000000000000000000000000000000000,
                    0.0000000000000000000000000000000000000000,
                    4.3817369205152925
                }
            },
            // T, RPM time constant
            0.06532,
            // action limit
            {0.3, 0.7}, // about [0.5thrust2weight, 2.5thrust2weight]
        };
    }
}
